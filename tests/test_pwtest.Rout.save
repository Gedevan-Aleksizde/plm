
R version 3.5.2 (2018-12-20) -- "Eggshell Igloo"
Copyright (C) 2018 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> ### Testfile for pwtest()
> 
> 
> ###  panelmodel interface did not respect the effect parameter in pre rev. 200, i. e.
> ###  for a supplied panelmodel effect="individual" and effect="time" delivered the same
> ###  result for CRAN version 1.4-0 / r-forge pre rev. 200
> 
> require(plm)
Loading required package: plm
> data("Produc", package="plm")
> formula <- log(gsp)~log(pcap)+log(pc)+log(emp)+unemp
> 
> 
> ## formula interface
> default_pwtest_formula <- pwtest(formula, data = Produc) # == effect = "individual"
> ind_pwtest_formula     <- pwtest(formula, data = Produc, effect = "individual")
> time_pwtest_formula    <- pwtest(formula, data = Produc, effect = "time")
> 
> ## panelmodel interface
> pool_prodc <- plm(formula, data=Produc, model="pooling")
> 
> default_pwtest_panelmodel <- pwtest(pool_prodc) # == effect = "individual"
> ind_pwtest_panelmodel     <- pwtest(pool_prodc, effect="individual")
> time_pwtest_panelmodel    <- pwtest(pool_prodc, effect="time")
> 
> if (!identical(default_pwtest_formula,    ind_pwtest_formula))    stop("pwtest.formula default effect != effect = 'individual'!")
> if (!identical(default_pwtest_panelmodel, ind_pwtest_panelmodel)) stop("pwtest.panelmodel default effect != effect = 'individual'!")
> 
> if (!identical(ind_pwtest_panelmodel,  ind_pwtest_formula))  stop("pwtest with effect = 'individual': formula and panelmodel interface results differ!")
> if (!identical(time_pwtest_panelmodel, time_pwtest_formula)) stop("pwtest with effect = 'individual': formula and panelmodel interface results differ!")
> if (identical(ind_pwtest_panelmodel, time_pwtest_panelmodel)) stop("pwtest results for effect='individual' and effect='time' are identical!")
> 
> 
> ### test if the error messages points to the correct possible values of 'effect' argument (only 'individual' or 'time' are allowed)
> # pwtest(formula, data=Produc, effect = "individualXX")
> # pwtest(pool_prodc, data=Produc, effect = "individualXX")
> 
> ### test if wrong input model is detected
> # fe_prodc <- plm(formula, data=Produc, model="within")
> # pwtest(fe_prodc)
> 
> proc.time()
   user  system elapsed 
  0.876   0.048   0.918 
