
R version 3.6.2 (2019-12-12) -- "Dark and Stormy Night"
Copyright (C) 2019 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> library("plm")
> data("Grunfeld", package = "plm")
> Grunfeld$const <- 5
> Grunfeld$allNA <- NA
> Grunfeld$non_finite <- 6
> Grunfeld$non_finite[1:50] <- -Inf
> Grunfeld$non_finite[51] <- 6.5
> Grunfeld$non_finite2 <- 7
> Grunfeld$non_finite2[1:40] <- NaN
> Grunfeld$non_finite2[41] <- 7.5
> 
> 
> # # plm()'s behaviour
> # plm(inv ~ value + capital + const, data = Grunfeld)         # works fine
> # plm(inv ~ value + capital + allNA, data = Grunfeld)         # errors with informative msg: 0 (non-NA) cases
> # plm(inv ~ value + capital + non_finite, data = Grunfeld)    # errors with informative msg: NA/NaN/Inf in 'x'
> # plm(inv ~ value + capital + non_finite2, data = Grunfeld)   # works fine
> # plm(inv ~ value + capital, data = Grunfeld[-c(1:40), ])     # check: same result as above line
> # 
> # 
> # # compare to behaviour of lm()
> # lm(inv ~ value + capital + const, data = Grunfeld)         # works fine
> # lm(inv ~ value + capital + allNA, data = Grunfeld)         # errors with informative msg: 0 (non-NA) cases
> # lm(inv ~ value + capital + non_finite, data = Grunfeld)    # errors with informative msg: NA/NaN/Inf in 'x'
> # lm(inv ~ value + capital + non_finite2, data = Grunfeld)   # works fine
> # lm(inv ~ value + capital, data = Grunfeld[-c(1:40), ])     # check: same result as above line
> 
> 
> pGrun_const <- pdata.frame(Grunfeld)
> pGrun_const <- pdata.frame(Grunfeld, drop.const.series = TRUE) # allNA series is also constant
These series are constants and have been removed: const, allNA
> pGrun_allNA <- pdata.frame(Grunfeld, drop.NA.series = TRUE)
This series is NA and has been removed: allNA
> pGrun_const_allNA <- pdata.frame(Grunfeld, drop.const.series = TRUE, drop.NA.series = TRUE)
This series is NA and has been removed: allNA
This series is constant and has been removed: const
> pGrun_const_allNA_non_finiteFALSE <- pdata.frame(Grunfeld, drop.const.series = TRUE, drop.NA.series = TRUE, replace.non.finite = FALSE)
This series is NA and has been removed: allNA
This series is constant and has been removed: const
> pGrun_non_finite <- pdata.frame(Grunfeld, replace.non.finite = TRUE)
> 
> 
> proc.time()
   user  system elapsed 
  0.573   0.069   0.626 
